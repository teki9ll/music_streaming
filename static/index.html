<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Music Room - Spotify Style</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Main App Container -->
  <div class="app-container">
    <!-- Top Navigation Bar -->
    <div class="nav-bar">
      <div class="nav-left">
        <div class="spotify-logo">
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" fill="#1DB954"/>
            <path d="M8 12.5C8 12.5 10 10.5 12 10.5C14 10.5 16 12.5 16 12.5" stroke="#000" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="9" cy="9" r="1" fill="#000"/>
            <circle cx="15" cy="9" r="1" fill="#000"/>
          </svg>
        </div>
        <span class="app-title">Music Room</span>
      </div>
      <div class="nav-right">
        <button id="settingsBtn" class="icon-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.65-.07-.97l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.97c0 .33.03.65.07.97l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.13-.22.07-.49-.12-.64l-2.11-1.65Z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Welcome Screen -->
      <div id="welcomeScreen" class="screen">
        <div class="welcome-content">
          <div class="hero-section">
            <h1 class="hero-title">Listen Together</h1>
            <p class="hero-subtitle">Create or join rooms to enjoy music with friends in real-time</p>
          </div>

          <div class="action-cards">
            <!-- Create Room Card -->
            <div class="action-card" id="createRoomCard">
              <div class="card-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"/>
                </svg>
              </div>
              <div class="card-content">
                <h3>Create Room</h3>
                <p>Start a new session and become the host</p>
                <button id="createRoomBtn" class="spotify-btn spotify-btn-primary">Create Room</button>
              </div>
            </div>

            <!-- Join Room Card -->
            <div class="action-card" id="joinRoomCard">
              <div class="card-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M11 7L9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"/>
                </svg>
              </div>
              <div class="card-content">
                <h3>Join Room</h3>
                <p>Enter a room code or select from active rooms</p>
                <button id="showJoinRoomBtn" class="spotify-btn spotify-btn-secondary">Join Room</button>
              </div>
            </div>
          </div>

          <!-- Active Rooms Section -->
          <div class="active-rooms-section">
            <h2>Active Rooms</h2>
            <div id="activeRooms" class="rooms-grid">
              <div class="loading-placeholder">
                <div class="spinner"></div>
                <p>Loading rooms...</p>
              </div>
            </div>
            <!-- Create Room Button -->
            <div style="text-align: center; margin-top: 20px;">
              <button id="createRoomFromListBtn" class="spotify-btn spotify-btn-primary" style="max-width: 300px;">
                âž• Create Your Own Room
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Create Room Modal -->
      <div id="createRoomModal" class="modal hidden">
        <div class="modal-content spotify-modal">
          <div class="modal-header">
            <h2>Create New Room</h2>
            <button class="modal-close" id="closeCreateModal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="createUsername">Your Name</label>
              <input type="text" id="createUsername" placeholder="Enter your display name" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="createRoomName">Room Name</label>
              <input type="text" id="createRoomName" placeholder="e.g., Chill Vibes, Study Session" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="createRoomPassword">
                Room Password (Optional)
                <span class="helper-text">Leave empty for open access</span>
              </label>
              <div class="password-input">
                <input type="password" id="createRoomPassword" placeholder="Set a password for private access">
                <button type="button" class="password-toggle" id="toggleCreatePassword">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="cancelCreateRoom" class="spotify-btn spotify-btn-secondary">Cancel</button>
            <button id="confirmCreateRoom" class="spotify-btn spotify-btn-primary">Create Room</button>
          </div>
        </div>
      </div>

      <!-- Join Room Modal -->
      <div id="joinRoomModal" class="modal hidden">
        <div class="modal-content spotify-modal">
          <div class="modal-header">
            <h2>Join Room</h2>
            <button class="modal-close" id="closeJoinModal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="joinUsername">Your Name</label>
              <input type="text" id="joinUsername" placeholder="Enter your display name" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="joinRoomName">Room Name</label>
              <input type="text" id="joinRoomName" placeholder="Enter room name" autocomplete="off">
            </div>
            <div class="form-group" id="joinPasswordGroup" style="display: none;">
              <label for="joinRoomPassword">Room Password</label>
              <div class="password-input">
                <input type="password" id="joinRoomPassword" placeholder="Enter room password">
                <button type="button" class="password-toggle" id="toggleJoinPassword">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="cancelJoinRoom" class="spotify-btn spotify-btn-secondary">Cancel</button>
            <button id="confirmJoinRoom" class="spotify-btn spotify-btn-primary">Join Room</button>
          </div>
        </div>
      </div>

      <!-- Music Room Screen (when in a room) -->
      <div id="roomScreen" class="screen hidden">
        <div class="room-header">
          <div class="room-info">
            <button id="backToHome" class="back-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
              </svg>
            </button>
            <div>
              <h2 id="currentRoomName">Room Name</h2>
              <div class="room-meta">
                <span id="userCount" class="user-count">0 users</span>
                <span id="hostBadge" class="host-badge hidden">ðŸ‘‘ HOST</span>
              </div>
            </div>
          </div>
          <button id="roomSettingsBtn" class="icon-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.65-.07-.97l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.97c0 .33.03.65.07.97l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.13-.22.07-.49-.12-.64l-2.11-1.65Z"/>
            </svg>
          </button>
        </div>

        <!-- Now Playing Section -->
        <div class="now-playing-section">
          <div class="album-art">
            <div class="album-placeholder">
              <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
              </svg>
            </div>
          </div>
          <div class="track-info">
            <h3 id="currentSongName">No song playing</h3>
            <p id="currentArtist">Select a song to start</p>
          </div>
        </div>

        <!-- Player Section -->
        <div class="player-section">
          <div class="progress-bar">
            <span id="currentTime">0:00</span>
            <div class="progress-container">
              <div class="progress-track">
                <div id="progressFill" class="progress-fill"></div>
              </div>
            </div>
            <span id="totalTime">0:00</span>
          </div>

          <div class="player-controls">
            <button id="shuffleBtn" class="control-btn secondary">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/>
              </svg>
            </button>
            <button id="seekBackBtn" class="control-btn">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/>
              </svg>
            </button>
            <button id="playPauseBtn" class="control-btn primary">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor" class="play-icon">
                <path d="M8 5v14l11-7z"/>
              </svg>
              <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor" class="pause-icon hidden">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
              </svg>
            </button>
            <button id="seekFwdBtn" class="control-btn">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/>
              </svg>
            </button>
            <button id="repeatBtn" class="control-btn secondary">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Song List -->
        <div class="song-list-section">
          <h3>Songs</h3>
          <div class="song-list" id="songList">
            <div class="loading-placeholder">
              <div class="spinner"></div>
              <p>Loading songs...</p>
            </div>
          </div>
        </div>

        <!-- Host Transfer Modal (existing) -->
        <div id="hostModal" class="modal hidden">
          <div class="modal-content spotify-modal">
            <div class="modal-header">
              <h3>ðŸ‘‘ Host Transfer Request</h3>
            </div>
            <div class="modal-body">
              <p id="hostModalMessage"></p>
            </div>
            <div class="modal-footer">
              <button id="rejectHostBtn" class="spotify-btn spotify-btn-secondary">Reject</button>
              <button id="acceptHostBtn" class="spotify-btn spotify-btn-primary">Accept</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Audio Player (hidden) -->
    <audio id="player" style="display: none;" preload="none" controls></audio>
  </div>

  <!-- Notification Area -->
  <div id="notificationArea"></div>

  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
  <script src="app.js"></script>
</body>
</html>

  